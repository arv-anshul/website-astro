---
import { getCollection } from "astro:content";
import FrontmatterCard from "@/components/frontmatter-card.astro";
import { ItemGroup } from "@/components/starwind/item";
import BaseLayout from "@/layouts/base-layout.astro";
import { getBlogSlugs } from "@/lib/blog-utils";

const posts = await getCollection("blog");
---

<BaseLayout
  title="Blog - ARV"
  description="Blogs written by ARV."
  nav={{ sticky: true }}
>
  <div>
    <h1 class="font-heading text-4xl font-bold mb-8 md:text-center">
      Latest Blog Posts
    </h1>
    <ItemGroup class="grid gap-3 md:grid-cols-2">
      {posts
          .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
          .map((post) => (
            <FrontmatterCard
              variant="small"
              href={`/v2/blog/${getBlogSlugs(post.id).pop()}`}
              data={post.data}
            />
          ))}
    </ItemGroup>
  </div>
</BaseLayout>
